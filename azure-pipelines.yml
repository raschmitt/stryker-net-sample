trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
  - task: DotNetCoreCLI@2
    displayName: 'Build'
    inputs:
      command: 'build'
      workingDirectory: 'Stryker.Net.Sample'
      
  - task: PowerShell@2
    displayName: 'Install coverlet'
    inputs:
      targetType: 'inline'
      script: 'dotnet tool install -g coverlet.console'
      
  - task: DotNetCoreCLI@2
    displayName: 'Test'
    inputs:
      command: 'custom'
      custom: 'coverlet'
      arguments: 'bin/Debug/netcoreapp3.1/Stryker.Net.Sample.Tests.dll -t dotnet -a "test --no-build" -f opencover'
      workingDirectory: 'Stryker.Net.Sample/Stryker.Net.Sample.Tests'

